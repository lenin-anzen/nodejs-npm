<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>NodeJS - NPM</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <style>
            code {
                white-space: pre-wrap;       /* css-3 */
                white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
                white-space: -pre-wrap;      /* Opera 4-6 */
                white-space: -o-pre-wrap;    /* Opera 7 */
                word-wrap: break-word;       /* Internet Explorer 5.5+ */
            }
            img.github-ribbon {
                position: absolute;
                top: 0;
                right: 0;
                border: 0;
            }
            a[target="_blank"]:after {
                font-family: 'FontAwesome';
                content: " \f08e";
            }
            a.without-fa:after {
                content: "";
            }
        </style>
    </head>
    <body>
        <a href="https://github.com/lenin-anzen/nodejs-npm" target="_blank" title="Fork me on GitHub" class="without-fa">
            <img class="github-ribbon" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png">
        </a>
        <div class="container">
            <div class="jumbotron">
                <h1>NodeJS - NPM</h1>
                <h3>Node Package Manager</h3>
                <p>El administrador de paquetes de NodeJS nos permite agregar dependencias a nuestros proyectos.</p>
                <ul>
                    <li><a href="#install-update">Instalación / Actualización</a></li>
                    <li><a href="#package">package.json</a></li>
                    <li><a href="#start-project">Iniciar proyecto</a></li>
                    <li><a href="#search-packages">Búsqueda de Paquetes</a></li>
                    <li><a href="#install-packages">Instalación de paquetes</a></li>
                    <li><a href="#update-packages">Actualización de paquetes</a></li>
                    <li><a href="#uninstall-packages">Desinstalación de paquetes</a></li>
                    <li><a href="#configure-packages">Configuración de Paquetes</a></li>
                    <li><a href="#publish-packages">Publicación de Paquetes</a></li>
                    <li><a href="#update-published-packages">Actualizar paquetes publicados</a></li>
                </ul>
            </div>
            <div class="panel panel-default" id="install-update">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="https://docs.npmjs.com/getting-started/installing-node" target="_blank" title="Instalación / Actualización">Instalación / Actualización</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                            <p>NPM viene incluido dentro de la instalación de NodeJs.</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                            <p>Para instalar NodeJS se puede descargar del sitio web.</p>
                            <ul>
                              <li><a href="https://nodejs.org/en/download/" target="_blank">NodeJS Download</a></li>
                            </ul>
                            <p>Se puede instalar desde el administrador de paquetes del sistema operativo:</p>
                            <div class="table-responsive">
                              <table class="table table-bordered table-hover table-condensed">
                                <thead>
                                  <tr>
                                    <th>CentOS</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td><code>curl --silent --location https://rpm.nodesource.com/setup_6.x | bash -
sudo yum install -y nodejs</code></td>
                                  </tr>
                                </tbody>
                              </table>
                              <table class="table table-bordered table-hover table-condensed">
                                <thead>
                                  <tr>
                                    <th>Ubuntu</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td><code>curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash
sudo apt-get install -y nodejs</code></td>
                                  </tr>
                                </tbody>
                              </table>
                              <table class="table table-bordered table-hover table-condensed">
                                <thead>
                                  <tr>
                                    <th>MAC OS X</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td><code>brew install node</code></td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                            <p>Se puede instalar con <a href="https://github.com/creationix/nvm#install-script" target="_blank">NVM(Node Version Manager)</a></p>
                            <code>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash
nvm install node
nvm use node</code>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col md-6 col-sm-6">
                            <p>Obtener versión de NodeJS:</p>
                        </div>
                        <div class="col md-6 col-sm-6">
                            <code>node -v</code>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col md-6 col-sm-6">
                            <p>Obtener versión de NPM:</p>
                        </div>
                        <div class="col md-6 col-sm-6">
                            <code>npm -v</code>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col md-6 col-sm-6">
                            <p>Actualizar</p>
                        </div>
                        <div class="col md-6 col-sm-6">
                            <code>npm install npm@latest -g</code>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="package">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="https://docs.npmjs.com/getting-started/using-a-package.json" target="_blank" title="Using a package.json">package.json</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                          <p>El archivo <strong>package.json</strong> sirve para guardar información del proyecto así como las dependencias que se deben instalar para su buen funcionamiento, dicha información es:</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col md-4 col-sm-4">
                          <ul>
                            <li><p><strong>name:</strong> string</p></li>
                            <li><p><strong>version:</strong> string</p></li>
                            <li><p><strong>description:</strong> string</p></li>
                            <li><p><strong>author:</strong> string</p></li>
                            <li><p><strong>license:</strong> string</p></li>
                          </ul>
                        </div>
                        <div class="col md-4 col-sm-4">
                          <ul>
                            <li><p><strong>dependencies:</strong> object</p></li>
                            <li><p><strong>devDependencies:</strong> object</p></li>
                            <li><p><strong>scripts:</strong> object</p></li>
                            <li><p><strong>keywords:</strong> array</p></li>
                            <li><p><strong>private:</strong> boolean</p></li>
                          </ul>
                        </div>
                        <div class="col md-4 col-sm-4">
                          <ul>
                            <li><p><strong>main:</strong> string</p></li>
                            <li><p><strong>directories:</strong> directories</p></li>
                            <li><p><strong>repository:</strong> object</p></li>
                            <li><p><strong>bugs:</strong> object</p></li>
                          </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                          <p>El archivo <strong>.npmignore</strong> junto al <strong>.gitignore</strong> sirve para ignorar archivos.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="start-project">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="" title="Iniciar proyecto">Iniciar proyecto</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                            <p>En cualquer directorio, inicializar proyecto mediante:</p>
                            <code>npm init --yes</code><br><br>
                            <p>Se generará el archivo <strong>package.json</strong> con el siguiente contenido:</p>
                            <ul>
                                <li><p><i>Se toma la información del directorio actual.</i></p></li>
                                <li><p><i>Si se tiene un README.md se tomará la descripción de ahí.</i></p></li>
                            </ul>
                            <pre>{
  "name": "nodejs-npm",
  "version": "1.0.0",
  "description": "Node Package Manager explanation",
  "main": "index.js",
  "directories": {
    "doc": "docs"
  },
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/lenin-anzen/nodejs-npm.git"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "bugs": {
    "url": "https://github.com/lenin-anzen/nodejs-npm/issues"
  },
  "homepage": "https://github.com/lenin-anzen/nodejs-npm#readme"
}</pre>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="search-packages">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="https://docs.npmjs.com/cli/search" target="_blank" title="Búsqueda de Paquetes">Búsqueda de Paquetes</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                            <p>Buscar paquetes:</p>
                            <code>npm search &lt;package_name&gt;</code>
                            <hr>
                            <p>Buscar la última versión de un paquete:</p>
                            <code>npm view &lt;package_name&gt; version</code>
                            <hr>
                            <p>Buscar todas las versiones de un paquete:</p>
                            <code>npm view &lt;package_name&gt; versions</code><br>
                            <code>npm show &lt;package_name&gt; versions</code><br>
                            <code>npm info &lt;package_name&gt; versions</code><br>
                            <code>npm v &lt;package_name&gt; versions</code>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="install-packages">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="" target="_blank" title="Instalación de paquetes">Instalación de paquetes</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                            <p>Para descargar un paquete al directorio <strong>node_modules</strong> dentro del directorio actual:</p>
                            <code>npm install &lt;package_name&gt;</code>
                            <hr>
                            <p>Existen dos tipos de dependencias en el archivo <strong>package.json</strong>:</p>
                            <ul>
                                <li>
                                    <p><strong>"dependencies"</strong>: Estos paquetes son requeridos por la aplicación para producción:</p>
                                    <ul>
                                        <li><code>npm install &lt;package_name&gt; --save</code></li>
                                    </ul>
                                </li>
                                <li>
                                    <p><strong>"devDependencies"</strong>: Estos paquetes son requeridos sólo para desarrollo y pruebas:</p>
                                    <ul>
                                        <li><code>npm install &lt;package_name&gt; -D</code></li>
                                        <li><code>npm install &lt;package_name&gt; --save-dev</code></li>
                                    </ul>
                                </li>
                            </ul>
                            <p>Se generará el directorio <strong>node_modules</strong></p>
                            <p>Se acualizará el archivo <strong>package.json</strong> con el paquete y su última versión.</p>
                            <p>Instalación global de paquetes:</p>
                            <code>npm install -g &lt;package_name&gt;</code>
                            <hr>
                            <p>Instalación de una versión específica:</p>
                            <code>npm install --save &lt;package_name&gt;@&lt;version&gt;</code><br>
                            <code>npm install --save eslint@4.1.1</code>
                            <hr>
                            <p>Instalación de un rango de versiones:</p>
                            <code>npm install --save &lt;package_name&gt;@&lt;version range&gt;</code><br>
                            <code>npm install --save eslint@&gt;=0.1.0 <0.2.0&lt;</code>
                            <hr>
                            <p>Instalación de los paquetes que se encuentran en el archivo <strong>package.json</strong>:</p>
                            <code>npm install</code>
                            <hr>
                            <p>Instalación desde un repositorio del <strong>GIT</strong>:</p>
                            <code>npm install git+https://lenin-anzen@github.com/eslint/eslint.git</code>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="update-packages">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="https://docs.npmjs.com/getting-started/updating-local-packages" target="_blank" title="Actualización de paquetes">Actualización de paquetes</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                            <p>Actualizar paquetes locales:</p>
                            <ul>
                                <li><code>npm update</code></li>
                            </ul>
                            <p>Obtener paquetes desactualizados:</p>
                            <ul>
                                <li><code>npm outdated</code></li>
                            </ul>
                            <pre>Package   Current  Wanted  Latest  Location
eslint     3.19.0  3.19.0   4.1.1  package_name
jest       19.0.2  19.0.2  20.0.4  package_name
jest-cli   19.0.2  19.0.2  20.0.4  package_name</pre>
                            <p>Actualizar paquete instalado globalmente:</p>
                            <ul>
                                <li><code>npm update -g &lt;package_name&gt;</code></li>
                            </ul>
                            <p>Obtener paquetes desactualizados globalmente:</p>
                            <ul>
                                <li><code>npm outdated -g --depth=0</code></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="uninstall-packages">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="https://docs.npmjs.com/getting-started/uninstalling-local-packages" target="_blank" title="Desinstalación de paquetes">Desinstalación de paquetes</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                            <p>Desinstalar paquete para producción:</p>
                            <ul>
                                <li><code>npm uninstall --save &lt;package_name&gt;</code></li>
                            </ul>
                            <p>Desinstalar paquete para desarrollo y pruebas:</p>
                            <ul>
                                <li><code>npm uninstall --save-dev &lt;package_name&gt;</code></li>
                            </ul>
                            <p>Desinstalar paquete global:</p>
                            <ul>
                                <li><code>npm uninstall -g &lt;package_name&gt;</code></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="configure-packages">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="https://docs.npmjs.com/getting-started/semantic-versioning" target="_blank" title="Configuración de Paquetes">Configuración de Paquetes</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                          <p>Se pueden especificar reglas para obtener ciertas versiones de los paquetes cuando actualizemos con:</p>
                          <code>npm update</code>
                          <hr>
                          <p>Suponiendo que el paquete instalado tiene la versión 1.0.4, en nuestro archivo <strong>package.json</strong> debemos especificar la versión a la cuál quereemos actualizar.</p>
                          <ul>
                            <li>Versiones de parches / Aproximadamente equivalente a la versión: <code>1.0</code> or <code>1.0.x</code> or <code>~1.0.4</code></li>
                            <li>Lanzamientos menores / Compatible con la versión: <code>1</code> or <code>1.x</code> or <code>^1.0.4</code></li>
                            <li>Lanzamientos principales / Cualquier versión: <code>*</code> or <code>x</code></li>
                          </ul>
                          <hr>
                          <p>Un ejemplo de las versiones de dependencias es:</p>
                          <pre>{ "dependencies" :
  { "foo" : "1.0.0 - 2.9999.9999"
  , "bar" : "&gt;=1.0.2 &lt;2.1.2"
  , "baz" : "&gt;1.0.2 &lt;=2.3.4"
  , "boo" : "2.0.1"
  , "qux" : "&lt;1.0.0 || &gt;=2.3.1 &lt;2.4.5 || &gt;=2.5.2 &lt;3.0.0"
  , "asd" : "http://asdf.com/asdf.tar.gz"
  , "til" : "~1.2"
  , "elf" : "~1.2.3"
  , "two" : "2.x"
  , "thr" : "3.3.x"
  , "lat" : "latest"
  , "dyl" : "file:../dyl"
  }
}
</pre>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="publish-packages">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="https://docs.npmjs.com/getting-started/publishing-npm-packages" target="_blank" title="Publicación de Paquetes">Publicación de Paquetes</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                          <p>Se debe tener como mínimo un package.json generado con el comando:</p>
                          <code>npm init --yes</code>
                          <hr>
                          <h4>Crear/Configurar usuario</h4>
                          <p>Para crear un usuario se puede realizar de dos formas:</p>
                          <ol>
                            <li>
                                <p>Mediante el comando:</p>
                                <code>npm adduser</code>
                            </li>
                            <li>
                                <p>Crear una cuenta en el sitio web <a href="https://www.npmjs.com/signup" target="_blank">https://www.npmjs.com/signup</a>.</p>
                                <ul>
                                    <li>
                                        <p>Posteriormente ingresar con el comando:</p>
                                        <code>npm login</code>
                                    </li>
                                </ul>
                            </li>
                          </ol>
                          <pre>Username: lenin-anzen
Password:
Email: (this IS public) lmeza@anzen.com.mx
Logged in as lenin-anzen on https://registry.npmjs.org/.</pre>
                          <p>Publicar el paquete mediante el comando:</p>
                          <code>npm publish</code>
                          <pre>> my-package@0.0.1 prepublish ~\my-package
> nsp check

(+) No known vulnerabilities found
+ my-package6@0.0.1</pre>
                            <p>El paquete estará disponible en la página del usuario que lo registró <a href="https://www.npmjs.com/~" target="_blank">https://www.npmjs.com/~</a></p>
                            <ul>
                                <li><p>Ejemplo: <a href="https://www.npmjs.com/package/generator-anzdig-aw-es6" target="_target">https://www.npmjs.com/package/generator-anzdig-aw-es6</a></p></li>
                            </ul>
                            <p>Se debe especificar que el repositorio no es privado mediante la propiedad:</p>
                            <pre>"private": false</pre>
                            <p>De otro modo mostrará el siguiente error:</p>
                            <pre>npm ERR! This package has been marked as private
npm ERR! Remove the 'private' field from the package.json to publish it.</pre>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" id="update-published-packages">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="https://docs.npmjs.com/getting-started/publishing-npm-packages#updating-the-package" target="_blank" title="Actualizar paquetes publicados">Actualizar paquetes publicados</a></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col md-12 col-sm-12">
                          <p>Para actualizar un paquete se deben tomar en cuenta los siguientes tipos de actualizaciones:</p>
                          <ol>
                            <li><p><strong>patch</strong>: v0.0.2</p></li>
                            <li><p><strong>minor</strong>: v0.1.0</p></li>
                            <li><p><strong>major</strong>: v1.0.0</p></li>
                          </ol>
                          <p>Mediante el siguiente comando se actualizará la versión del archivo package.json</p>
                          <code>npm version &lt;tipo de actualización&gt; -m "Added Webpack to the %s version"</code>
                          <hr>
                          <p>Si se tiene un repositorio de Git se agregará un tag con el número de release.</p>
                          <pre>commit c38a46ee01ff91536cc9ce7591221da0c16c4c7b (HEAD -&gt; master, tag: v0.0.3)
Author: Lenin Meza &lt;lmeza@anzen.com.mx&gt;
Date:   Wed Jul 5 17:04:01 2017 -0500

    0.0.3</pre>
                          <hr>
                          <p>Se pueden agregar scripts para ejecutarse junto a la <i>version</i>:</p>
                          <pre>"scripts": {
  "preversion": "npm test",
  "version": "npm run build && git add -A dist",
  "postversion": "git push && git push --tags && rm -rf build/temp"
}</pre>
                          <hr>
                          <p>Después de actualizar la versión, publicar el repositorio de nuevo:</p>
                          <code>npm publish</code>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
